# ── Prefix ─────────────────────────────────────────────────────────────────
# Change prefix from Ctrl+b to Ctrl+a (much more ergonomic)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ── General ────────────────────────────────────────────────────────────────
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",alacritty:RGB"   # tell tmux alacritty supports true color
set -g history-limit 10000                    # scrollback buffer
set -g mouse on                               # mouse support (resize panes, click to focus)
set -g base-index 1                           # start window numbering at 1
setw -g pane-base-index 1                     # start pane numbering at 1
set -g renumber-windows on                    # re-number windows when one is closed
set -sg escape-time 0                         # no delay for escape key (important for Vim/editors)
set -g focus-events on                        # pass focus events to apps inside tmux

# Enable middle mouse button pasting
set -g mouse on
set -g set-clipboard on
set -o -g default-command "reattach-to-user-namespace -l bash"  # For macOS/Linux clipboard integration
set -g terminal-overrides ",xterm-256color:Tc"  # Enable true color and clipboard

# ── Key Bindings ───────────────────────────────────────────────────────────
# Reload config without restarting
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded"

# Intuitive splits: | for vertical, - for horizontal
# Also opens new pane in the SAME directory as current pane
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Navigate panes with nvim-style keys (no prefix needed with this setup)
bind -n C-h select-pane -L
bind -n C-l select-pane -R
bind -n C-k select-pane -U
bind -n C-j select-pane -D

# Resize panes with prefix + nvim keys
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5
bind -r K resize-pane -U 5
bind -r J resize-pane -D 5

# New window in current path
bind c new-window -c "#{pane_current_path}"

# ── Status Bar ─────────────────────────────────────────────────────────────
# Catppuccin Mocha palette
set -g status-position top
set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
set -g status-left-length 40
set -g status-right-length 60

# Left: session name
set -g status-left "#[bg=#89b4fa,fg=#1e1e2e,bold] #S #[bg=#1e1e2e,fg=#89b4fa]"

# Right: host + time
set -g status-right "#[fg=#a6adc8] %H:%M  #[fg=#a6e3a1]#H "

# Window tabs
set -g window-status-format "#[fg=#6c7086] #I #W "
set -g window-status-current-format "#[bg=#313244,fg=#cdd6f4,bold] #I #W "

# Pane borders
set -g pane-border-style "fg=#313244"
set -g pane-active-border-style "fg=#89b4fa"

# ── Copy Mode (Vi-style) ───────────────────────────────────────────────────
setw -g mode-keys vi
bind Enter copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "wl-copy"  # Wayland clipboard
# If you're on X11, use: "xclip -selection clipboard"

# ── Plugins ────────────────────────────────────────────────────────────────
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Initialize TMUX plugin manager (tpm)
run '~/.tmux/plugins/tpm/tpm'

